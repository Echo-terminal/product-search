<div class="filters">
  <div class="filter-header">
    <h3>Filters</h3>
    @if (hasActiveFilters()) {
      <button class="clear-btn" (click)="onClearFilters()">Clear All</button>
    }
  </div>

  <div class="filter-section">
    <h4>Brands ({{ totalBrands() }})</h4>
    <div class="filter-list">
      @for (brand of availableBrands(); track brand.brand) {
        <label class="filter-item">
          <input
            type="checkbox"
            [checked]="isBrandSelected(brand.brand)"
            (change)="onBrandToggle(brand.brand)"
          />
          <span class="filter-label">{{ brand.brand }}</span>
          <span class="filter-count">({{ brand.count }})</span>
        </label>
      }

      @if (loadingBrands()) {
        <div class="loading-more">Loading...</div>
      }
    </div>

    @if (hasMoreBrands() && !loadingBrands()) {
      <button class="load-more-btn" (click)="onLoadMoreBrands()">
        Show More ({{ availableBrands().length }} of {{ totalBrands() }})
      </button>
    }
  </div>

  <!-- Categories -->
  <div class="filter-section">
    <h4>Categories ({{ totalCategories() }})</h4>
    <div class="filter-list">
      @for (cat of availableCategories(); track cat.category) {
        <label class="filter-item">
          <input
            type="checkbox"
            [checked]="isCategorySelected(cat.category)"
            (change)="onCategoryToggle(cat.category)"
          />
          <span class="filter-label">{{ cat.category }}</span>
          <span class="filter-count">({{ cat.count }})</span>
        </label>
      }

      @if (loadingCategories()) {
        <div class="loading-more">Loading...</div>
      }
    </div>

    @if (hasMoreCategories() && !loadingCategories()) {
      <button class="load-more-btn" (click)="onLoadMoreCategories()">
        Show More ({{ availableCategories().length }} of {{ totalCategories() }})
      </button>
    }
  </div>
</div>