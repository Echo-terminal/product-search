<div class="search-container">
  <header class="search-header">
    <h1>Product Search</h1>
    
    <div class="search-box">
      <input 
        type="text"
        [value]="searchQuery()"
        (input)="onSearchInput($any($event.target).value)"
        placeholder="Search products by name..."
        class="search-input"
        aria-label="Search products"
      />
      @if (searchQuery()) {
        <button 
          class="clear-search-btn"
          (click)="onClearSearch()"
          aria-label="Clear search">
          <ng-icon name="heroXMark" />
        </button>
      }
    </div>
  </header>
  
  <div class="search-layout">
    <aside class="sidebar">
      <app-product-filter
        [filters]="filters()"
        [availableCategories]="availableCategories()"
        [availableBrands]="availableBrands()"
        [totalCategories]="totalCategories()"
        [totalBrands]="totalBrands()"
        [loadingCategories]="loadingCategories()"
        [loadingBrands]="loadingBrands()"
        [hasMoreCategories]="hasMoreCategories()"
        [hasMoreBrands]="hasMoreBrands()"
        (filtersChange)="onFiltersChange($event)"
        (loadMoreCategories)="onLoadMoreCategories()"
        (loadMoreBrands)="onLoadMoreBrands()">
      </app-product-filter>
    </aside>
    
    <main class="main-content">
      @if (!loading() && pagination().totalItems > 0) {
        <div class="results-info">
          <span class="total-results">Found <strong>{{ pagination().totalItems }}</strong> products</span>
          @if (searchQuery()) {
            <span class="search-term">for "{{ searchQuery() }}"</span>
          }
          @if (filters().categories.length > 0) {
            <span class="filter-count">
              Â· {{ filters().categories.length }} filter(s) active
            </span>
          }
        </div>
      }

      <app-product-list 
        [products]="products()"
        [pagination]="pagination()"
        [loading]="loading()"
        [searchQuery]="searchQuery()"
        (pageChange)="onPageChange($event)">
      </app-product-list>
    </main>
  </div>
</div>